<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Installation &#8212; MPI for Python 4.1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=2bf1fcf8" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    
    <script src="_static/documentation_options.js?v=58fc1558"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=da5f30a5"></script>
    
    <link rel="icon" href="_static/mpi4py.svg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="develop.html" />
    <link rel="prev" title="Citation" href="citation.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="develop.html" title="Development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="citation.html" title="Citation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MPI for Python 4.1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h1>
<section id="wheel-packages">
<h2><strong>Wheel</strong> packages<a class="headerlink" href="#wheel-packages" title="Link to this heading">¶</a></h2>
<p>The mpi4py project builds and publishes binary wheels able to run in a
variety of:</p>
<ul class="simple">
<li><p>operating systems: <em>Linux</em>, <em>macOS</em>, <em>Windows</em>;</p></li>
<li><p>processor architectures: <em>AMD64</em>, <em>ARM64</em>;</p></li>
<li><p>MPI implementations: <em>MPICH</em>, <em>Open MPI</em>,
<em>MVAPICH</em>, <em>Intel MPI</em>, <em>HPE Cray MPICH</em>, <em>Microsoft MPI</em>;</p></li>
<li><p>Python implementations: <em>CPython</em>, <em>PyPy</em>.</p></li>
</ul>
<p>These mpi4py wheels are distributed via the Python Package Index
(<a class="reference external" href="https://pypi.org/project/mpi4py/">PyPI</a>) and can be installed
with Python package managers like <a class="reference external" href="https://pip.pypa.io">pip</a>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>mpi4py
</pre></div>
</div>
<p>The mpi4py wheels can be installed in standard Python virtual
environments. The MPI runtime can be provided by other wheels
installed in the same virtual environment.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Intel publishes production-grade <a class="reference external" href="https://pypi.org/project/impi-rt/#files">Intel MPI wheels</a> for Linux (x86_64) and Windows (AMD64).
mpi4py and MPI wheels can be installed side by side to get a
ready-to-use Python+MPI environment:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>mpi4py<span class="w"> </span>impi-rt
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The mpi4py project publishes <a class="reference external" href="https://pypi.org/project/mpich/#files">MPICH wheels</a> and
<a class="reference external" href="https://pypi.org/project/openmpi/#files">Open MPI wheels</a> for Linux
(x86_64/aarch64) and macOS (arm64/x86_64).
mpi4py and MPI wheels can be installed side by side to get a
ready-to-use Python+MPI environment:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>mpi4py<span class="w"> </span>mpich<span class="w">    </span><span class="c1"># for MPICH</span>
python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>mpi4py<span class="w"> </span>openmpi<span class="w">  </span><span class="c1"># for Open MPI</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The MPI wheels are distributed with special focus on ease of
use, convenience, compatibility, and interoperability. The Linux
wheels are built in somewhat constrained environments with
relatively dated Linux distributions (<a class="reference external" href="https://github.com/pypa/manylinux">manylinux</a> container
images). Therefore, they may lack support for features like GPU
awareness (CUDA/ROCm) and C++/Fortran bindings. In production
scenarios, it is recommended to use external (either
custom-built or system-provided) MPI installations.</p>
</div>
</div>
<p>The mpi4py wheels can also be installed (with <a class="reference external" href="https://pip.pypa.io">pip</a>) in <a class="reference external" href="https://docs.conda.io">conda</a>
environments and they should work out of the box, without any special
tweak to environment variables, for any of the MPI packages provided
by <a class="reference external" href="https://conda-forge.org/">conda-forge</a>.</p>
<p>Externally-provided MPI implementations may come from a system package
manager, sysadmin-maintained builds accessible via module files, or
customized user builds. Such usage is supported and encouraged.
However, there are a few platform-specific considerations to take into
account.</p>
<section id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Link to this heading">¶</a></h3>
<p>The Linux (x86_64/aarch64) wheels require one of</p>
<ul class="simple">
<li><p><a class="reference external" href="https://mpich.org">MPICH</a> or any other ABI-compatible derivative,
like <a class="reference external" href="https://mvapich.cse.ohio-state.edu">MVAPICH</a>, <a class="reference external" href="https://software.intel.com/intel-mpi-library">Intel MPI</a>, <a class="reference external" href="https://cpe.ext.hpe.com/docs/latest/mpt/mpich/">HPE Cray MPICH</a></p></li>
<li><p><a class="reference external" href="https://open-mpi.org">Open MPI</a> or any other ABI-compatible derivative,
like <a class="reference external" href="https://developer.nvidia.com/networking/hpc-x">NVIDIA HPC-X</a></p></li>
</ul>
<p>Users may need to set the <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> environment variable
such that the dynamic linker is able to find at runtime the MPI shared
library file (<code class="docutils literal notranslate"><span class="pre">libmpi.so.*</span></code>).</p>
<section id="fedora-rhel">
<h4>Fedora/RHEL<a class="headerlink" href="#fedora-rhel" title="Link to this heading">¶</a></h4>
<p>On Fedora/RHEL systems, both MPICH and Open MPI are available for
installation. There is no default or preferred MPI implementation.
Instead, users must select their favorite MPI implementation by
loading the proper MPI module.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>mpi/mpich-<span class="k">$(</span>arch<span class="k">)</span><span class="w">    </span><span class="c1"># for MPICH</span>
module<span class="w"> </span>load<span class="w"> </span>mpi/openmpi-<span class="k">$(</span>arch<span class="k">)</span><span class="w">  </span><span class="c1"># for Open MPI</span>
</pre></div>
</div>
<p>After loading the requested MPI module, the <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>
environment variable should be properly setup.</p>
</section>
<section id="debian-ubuntu">
<h4>Debian/Ubuntu<a class="headerlink" href="#debian-ubuntu" title="Link to this heading">¶</a></h4>
<p>On Debian/Ubuntu systems, Open MPI is the default MPI implementation
and most of the MPI-based applications and libraries provided by the
distribution depend on Open MPI. Nonetheless, MPICH is also
available to users for installation.</p>
<p>In Ubuntu 22.04 and older, due to legacy reasons, the MPICH ABI is
slightly broken: the MPI shared library file is named
<code class="docutils literal notranslate"><span class="pre">libmpich.so.12</span></code> instead of <code class="docutils literal notranslate"><span class="pre">libmpi.so.12</span></code> as required by the
<a class="reference external" href="https://www.mpich.org/abi/">MPICH ABI Compatibility Initiative</a>.</p>
<p>Users without <code class="docutils literal notranslate"><span class="pre">sudo</span></code> access can workaround this issue creating a
symbolic link anywhere in their home directory and appending to
<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/.local/lib
<span class="nv">libdir</span><span class="o">=</span>/usr/lib/<span class="k">$(</span>arch<span class="k">)</span>-linux-gnu
ln<span class="w"> </span>-s<span class="w"> </span><span class="nv">$libdir</span>/libmpich.so.12<span class="w"> </span>~/.local/lib/libmpi.so.12
<span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:~/.local/lib
</pre></div>
</div>
<p>A system-wide fix for all users requires <code class="docutils literal notranslate"><span class="pre">sudo</span></code> access:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">libdir</span><span class="o">=</span>/usr/lib/<span class="k">$(</span>arch<span class="k">)</span>-linux-gnu
sudo<span class="w"> </span>ln<span class="w"> </span>-sr<span class="w"> </span><span class="nv">$libdir</span>/libmpi<span class="o">{</span>ch,<span class="o">}</span>.so.12
</pre></div>
</div>
</section>
<section id="hpe-cray-os">
<h4>HPE Cray OS<a class="headerlink" href="#hpe-cray-os" title="Link to this heading">¶</a></h4>
<p>On HPE Cray systems, users must load the <code class="docutils literal notranslate"><span class="pre">cray-mpich-abi</span></code> module.
For further details, refer to <a class="reference external" href="https://cpe.ext.hpe.com/docs/latest/mpt/mpich/intro_mpi.html#using-mpich-abi-compatibility">man intro_mpi</a>.</p>
</section>
</section>
<section id="macos">
<h3>macOS<a class="headerlink" href="#macos" title="Link to this heading">¶</a></h3>
<p>The macOS (arm64/x86_64) wheels require</p>
<ul class="simple">
<li><p><a class="reference external" href="https://mpich.org">MPICH</a> or <a class="reference external" href="https://open-mpi.org">Open MPI</a> installed (either manually or via a package
manager) in the standard system prefix <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code></p></li>
<li><p><a class="reference external" href="https://mpich.org">MPICH</a> or <a class="reference external" href="https://open-mpi.org">Open MPI</a> installed via <a class="reference external" href="https://brew.sh/">Homebrew</a> in the default
prefix <code class="docutils literal notranslate"><span class="pre">/opt/homebrew</span></code></p></li>
<li><p><a class="reference external" href="https://mpich.org">MPICH</a> or <a class="reference external" href="https://open-mpi.org">Open MPI</a> installed via <a class="reference external" href="https://www.macports.org/">MacPorts</a> in the default
prefix <code class="docutils literal notranslate"><span class="pre">/opt/local</span></code></p></li>
</ul>
</section>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Link to this heading">¶</a></h3>
<p>The Windows (AMD64) wheels require one of</p>
<ul class="simple">
<li><p><a class="reference external" href="https://software.intel.com/intel-mpi-library">Intel MPI</a></p></li>
<li><p><a class="reference external" href="https://learn.microsoft.com/message-passing-interface/microsoft-mpi">Microsoft MPI</a></p></li>
</ul>
<p>User may need to set the <code class="docutils literal notranslate"><span class="pre">I_MPI_ROOT</span></code> or <code class="docutils literal notranslate"><span class="pre">MSMPI_BIN</span></code> environment
variables such that the MPI dynamic link library (DLL) (<code class="docutils literal notranslate"><span class="pre">impi.dll</span></code>
or <code class="docutils literal notranslate"><span class="pre">msmpi.dll</span></code>) can be found at runtime.</p>
<p>Intel MPI is under active development and supports recent versions of
the MPI standard. Intel MPI can be installed with <code class="docutils literal notranslate"><span class="pre">pip</span></code> (see the
<a class="reference external" href="https://pypi.org/project/impi-rt/">impi-rt</a> package on PyPI), being therefore straightforward to get it
up and running within a Python environment. Intel MPI can also be
installed system-wide as part of the Intel oneAPI HPC Toolkit for
Windows or via standalone online/offline installers.</p>
</section>
</section>
<section id="conda-packages">
<h2><strong>Conda</strong> packages<a class="headerlink" href="#conda-packages" title="Link to this heading">¶</a></h2>
<p>The <a class="reference external" href="https://conda-forge.org/">conda-forge</a> community provides ready-to-use binary packages
from an ever growing collection of software libraries built around the
multi-platform <em>conda</em> package manager. Four MPI implementations are
available on conda-forge: Open MPI (Linux and macOS), MPICH (Linux and
macOS), Intel MPI (Linux and Windows), and Microsoft MPI (Windows).
You can install mpi4py and your preferred MPI implementation using the
<a class="reference external" href="https://docs.conda.io">conda</a> package manager:</p>
<ul>
<li><p>to use MPICH do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>mpi4py<span class="w"> </span>mpich
</pre></div>
</div>
</li>
<li><p>to use Open MPI do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>mpi4py<span class="w"> </span>openmpi
</pre></div>
</div>
</li>
<li><p>to use Intel MPI do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>mpi4py<span class="w"> </span>impi_rt
</pre></div>
</div>
</li>
<li><p>to use Microsoft MPI do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>mpi4py<span class="w"> </span>msmpi
</pre></div>
</div>
</li>
</ul>
<p>MPICH and many of its derivatives are ABI-compatible. You can provide
the package specification <code class="docutils literal notranslate"><span class="pre">mpich=X.Y.*=external_*</span></code> (where <code class="docutils literal notranslate"><span class="pre">X</span></code> and
<code class="docutils literal notranslate"><span class="pre">Y</span></code> are the major and minor version numbers) to request the conda
package manager to use system-provided MPICH (or derivative)
libraries. Similarly, you can provide the package specification
<code class="docutils literal notranslate"><span class="pre">openmpi=X.Y.*=external_*</span></code> to use system-provided Open MPI
libraries.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">openmpi</span></code> package on conda-forge has built-in CUDA support, but
it is disabled by default. To enable it, follow the instruction
outlined during <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code>. Additionally, UCX support is also
available once the <code class="docutils literal notranslate"><span class="pre">ucx</span></code> package is installed.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The MPI conda-forge packages are built with special focus on
compatibility. The MPICH and Open MPI packages are built in a
constrained environment with relatively dated OS images. Therefore,
they may lack support for high-performance features like
cross-memory attach (XPMEM/CMA). In production scenarios, it is
recommended to use external (either custom-built or system-provided)
MPI installations. See the relevant conda-forge documentation about
<a class="reference external" href="https://conda-forge.org/docs/user/tipsandtricks/#using-external-message-passing-interface-mpi-libraries">using external MPI libraries</a> .</p>
</div>
</section>
<section id="system-packages">
<h2>System packages<a class="headerlink" href="#system-packages" title="Link to this heading">¶</a></h2>
<p>mpi4py is readily available through system package managers of most
Linux distributions and the most popular community package managers
for macOS.</p>
<section id="sys-pkg-linux">
<span id="id1"></span><h3>Linux<a class="headerlink" href="#sys-pkg-linux" title="Link to this heading">¶</a></h3>
<p>On <strong>Fedora Linux</strong> systems (as well as <strong>RHEL</strong> and their derivatives
using the EPEL software repository), you can install binary packages
with the system package manager:</p>
<ul>
<li><p>using <code class="docutils literal notranslate"><span class="pre">dnf</span></code> and the <code class="docutils literal notranslate"><span class="pre">mpich</span></code> package:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>python3-mpi4py-mpich
</pre></div>
</div>
</li>
<li><p>using <code class="docutils literal notranslate"><span class="pre">dnf</span></code> and the <code class="docutils literal notranslate"><span class="pre">openmpi</span></code> package:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>python3-mpi4py-openmpi
</pre></div>
</div>
</li>
</ul>
<p>Please remember to load the correct MPI module for your chosen MPI
implementation:</p>
<ul>
<li><p>for the <code class="docutils literal notranslate"><span class="pre">mpich</span></code> package do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>mpi/mpich-<span class="k">$(</span>arch<span class="k">)</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from mpi4py import MPI&quot;</span>
</pre></div>
</div>
</li>
<li><p>for the <code class="docutils literal notranslate"><span class="pre">openmpi</span></code> package do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>mpi/openmpi-<span class="k">$(</span>arch<span class="k">)</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from mpi4py import MPI&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>On <strong>Ubuntu Linux</strong> and <strong>Debian Linux</strong> systems, binary packages are
available for installation using the system package manager:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3-mpi4py
</pre></div>
</div>
<p>On <strong>Arch Linux</strong> systems, binary packages are available for
installation using the system package manager:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>pacman<span class="w"> </span>-S<span class="w"> </span>python-mpi4py
</pre></div>
</div>
</section>
<section id="sys-pkg-macos">
<span id="id2"></span><h3>macOS<a class="headerlink" href="#sys-pkg-macos" title="Link to this heading">¶</a></h3>
<p>macOS users can install mpi4py using the <a class="reference external" href="https://brew.sh/">Homebrew</a> package
manager:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>brew<span class="w"> </span>install<span class="w"> </span>mpi4py
</pre></div>
</div>
<p>Note that the Homebrew mpi4py package uses Open MPI. Alternatively,
install the <code class="docutils literal notranslate"><span class="pre">mpich</span></code> package and next install mpi4py from sources
using <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<p>Alternatively, mpi4py can be installed from <a class="reference external" href="https://www.macports.org/">MacPorts</a>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>port<span class="w"> </span>install<span class="w"> </span>py-mpi4py
</pre></div>
</div>
</section>
</section>
<section id="building-from-sources">
<h2>Building from sources<a class="headerlink" href="#building-from-sources" title="Link to this heading">¶</a></h2>
<p>Installing mpi4py from pre-built binary wheels, conda packages, or
system packages is not always desired or appropriate. For example, the
mpi4py wheels published on PyPI may not be interoperable with
non-mainstream, vendor-specific MPI implementations; or a system
mpi4py package may be built with a alternative, non-default MPI
implementation. In such scenarios, mpi4py can still be installed from
its source distribution (sdist) using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-binary<span class="o">=</span>mpi4py<span class="w"> </span>mpi4py
</pre></div>
</div>
<p>You can also install the in-development version with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/mpi4py/mpi4py
</pre></div>
</div>
<p>or:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>https://github.com/mpi4py/mpi4py/tarball/master
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Installing mpi4py from its source distribution (available on PyPI)
or Git source code repository (available on GitHub) requires a C
compiler and a working MPI implementation with development headers
and libraries.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span></code> keeps previously built wheel files in its cache for future
reuse. If you want to reinstall the <code class="docutils literal notranslate"><span class="pre">mpi4py</span></code> package from its source
distribution using a different or updated MPI implementation, you have
to either first remove the cached wheel file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>cache<span class="w"> </span>remove<span class="w"> </span>mpi4py
python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-binary<span class="o">=</span>mpi4py<span class="w"> </span>mpi4py
</pre></div>
</div>
<p>or ask <code class="docutils literal notranslate"><span class="pre">pip</span></code> to disable the cache:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>--no-binary<span class="o">=</span>mpi4py<span class="w"> </span>mpi4py
</pre></div>
</div>
</div>
</section>
<section id="build-backends">
<h2>Build backends<a class="headerlink" href="#build-backends" title="Link to this heading">¶</a></h2>
<p>mpi4py supports three different build backends: <a class="reference external" href="https://setuptools.pypa.io/">setuptools</a> (default),
<a class="reference external" href="https://scikit-build-core.readthedocs.io/">scikit-build-core</a> (<a class="reference external" href="https://cmake.org/">CMake</a>-based), and <a class="reference external" href="https://meson-python.readthedocs.io/">meson-python</a>
(<a class="reference external" href="https://mesonbuild.com/">Meson</a>-based). The build backend can be selected by setting the
<span class="target" id="index-0"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_BACKEND"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_BACKEND</span></code></a> environment variable.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPI4PY_BUILD_BACKEND">
<span class="sig-name descname"><span class="pre">MPI4PY_BUILD_BACKEND</span></span><a class="headerlink" href="#envvar-MPI4PY_BUILD_BACKEND" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Choices<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">&quot;setuptools&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;scikit-build-core&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;meson-python&quot;</span></code></p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">&quot;setuptools&quot;</span></code></p>
</dd>
</dl>
<p>Request a build backend for building mpi4py from sources.</p>
</dd></dl>

<section id="using-setuptools">
<h3>Using <strong>setuptools</strong><a class="headerlink" href="#using-setuptools" title="Link to this heading">¶</a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Set the <span class="target" id="index-1"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_BACKEND"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_BACKEND</span></code></a> environment variable to
<code class="docutils literal notranslate"><span class="pre">&quot;setuptools&quot;</span></code> to use the <a class="reference external" href="https://setuptools.pypa.io/">setuptools</a> build backend.</p>
</div>
<p>When using the default <a class="reference external" href="https://setuptools.pypa.io/">setuptools</a> build backend, mpi4py relies on
the legacy Python distutils framework to build C extension modules.
The following environment variables affect the build configuration.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPI4PY_BUILD_MPICC">
<span class="sig-name descname"><span class="pre">MPI4PY_BUILD_MPICC</span></span><a class="headerlink" href="#envvar-MPI4PY_BUILD_MPICC" title="Link to this definition">¶</a></dt>
<dd><p>The <strong class="program">mpicc</strong> compiler wrapper command is searched for in
the executable search path (<span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> environment variable)
and used to compile the <a class="reference internal" href="reference/mpi4py.MPI.html#module-mpi4py.MPI" title="mpi4py.MPI: Message Passing Interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">mpi4py.MPI</span></code></a> C extension module.
Alternatively, use the <span class="target" id="index-3"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_MPICC"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_MPICC</span></code></a> environment
variable to the full path or command corresponding to the MPI-aware
C compiler.</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPI4PY_BUILD_MPILD">
<span class="sig-name descname"><span class="pre">MPI4PY_BUILD_MPILD</span></span><a class="headerlink" href="#envvar-MPI4PY_BUILD_MPILD" title="Link to this definition">¶</a></dt>
<dd><p>The <strong class="program">mpicc</strong> compiler wrapper command is also used for
linking the <a class="reference internal" href="reference/mpi4py.MPI.html#module-mpi4py.MPI" title="mpi4py.MPI: Message Passing Interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">mpi4py.MPI</span></code></a> C extension module.
Alternatively, use the <span class="target" id="index-4"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_MPILD"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_MPILD</span></code></a> environment
variable to specify the full path or command corresponding to the
MPI-aware C linker.</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPI4PY_BUILD_MPICFG">
<span class="sig-name descname"><span class="pre">MPI4PY_BUILD_MPICFG</span></span><a class="headerlink" href="#envvar-MPI4PY_BUILD_MPICFG" title="Link to this definition">¶</a></dt>
<dd><p>If the MPI implementation does not provide a compiler wrapper, or
it is not installed in a default system location, all relevant
build information like include/library locations and library lists
can be provided in an ini-style configuration file under a
<code class="docutils literal notranslate"><span class="pre">[mpi]</span></code> section. mpi4py can then be asked to use the custom build
information by setting the <span class="target" id="index-5"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_MPICFG"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_MPICFG</span></code></a>
environment variable to the full path of the configuration file. As
an example, see the <code class="file docutils literal notranslate"><span class="pre">mpi.cfg</span></code> file located in the top level
mpi4py source directory.</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPI4PY_BUILD_CONFIGURE">
<span class="sig-name descname"><span class="pre">MPI4PY_BUILD_CONFIGURE</span></span><a class="headerlink" href="#envvar-MPI4PY_BUILD_CONFIGURE" title="Link to this definition">¶</a></dt>
<dd><p>Some vendor MPI implementations may not provide complete coverage
of the MPI standard, or may provide partial features of newer MPI
standard versions while advertising support for an older version.
Setting the <span class="target" id="index-6"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_CONFIGURE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_CONFIGURE</span></code></a> environment variable
to a non-empty string will trigger the run of exhaustive checks for
the availability of all MPI constants, predefined handles, and
routines.</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPI4PY_BUILD_MPIABI">
<span class="sig-name descname"><span class="pre">MPI4PY_BUILD_MPIABI</span></span><a class="headerlink" href="#envvar-MPI4PY_BUILD_MPIABI" title="Link to this definition">¶</a></dt>
<dd><p>Setting the <span class="target" id="index-7"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_MPIABI"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_MPIABI</span></code></a> environment variable to
<code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code> enables enhanced support for the MPI 5.0 standard ABI and
the MPICH or Open MPI legacy ABIs. The <a class="reference internal" href="reference/mpi4py.MPI.html#module-mpi4py.MPI" title="mpi4py.MPI: Message Passing Interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">mpi4py.MPI</span></code></a> extension
module is then able to dynamically link at runtime with older
versions (down to the MPI 3.0 standard) of the corresponding MPI
implementation used at compile time. This feature is only available
on Linux, macOS, and Windows. POSIX-like systems other than Linux
and macOS are not currently supported, although they could easily
be: all what is needed is for the platform to either support weak
symbols in shared modules/libraries, or support the standard POSIX
<code class="xref c c-func docutils literal notranslate"><span class="pre">dlopen()</span></code>/<code class="xref c c-func docutils literal notranslate"><span class="pre">dlsym()</span></code> APIs.</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPI4PY_BUILD_PYSABI">
<span class="sig-name descname"><span class="pre">MPI4PY_BUILD_PYSABI</span></span><a class="headerlink" href="#envvar-MPI4PY_BUILD_PYSABI" title="Link to this definition">¶</a></dt>
<dd><p>Build with the CPython 3.10+ <a class="reference external" href="https://docs.python.org/3/c-api/stable.html#stable-abi" title="(in Python v3.14)"><span class="xref std std-ref">Stable ABI</span></a>.
Setting the <span class="target" id="index-8"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_PYSABI"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_PYSABI</span></code></a> environment variable to a
string <code class="docutils literal notranslate"><span class="pre">&quot;{major}.{minor}&quot;</span></code> defines the <a class="reference external" href="https://docs.python.org/3/c-api/stable.html#c.Py_LIMITED_API" title="(in Python v3.14)"><code class="xref any docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code></a> value to
use for building extension modules.</p>
</dd></dl>

<p>The following environment variables are aliases for the ones described
above. Having shorter names, they are convenient for occasional use in
the command line. Its usage is not recommended in automation scenarios
like packaging recipes, deployment scripts, and container image
creation.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPICC">
<span class="sig-name descname"><span class="pre">MPICC</span></span><a class="headerlink" href="#envvar-MPICC" title="Link to this definition">¶</a></dt>
<dd><p>Convenience alias for <span class="target" id="index-9"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_MPICC"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_MPICC</span></code></a>.</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPILD">
<span class="sig-name descname"><span class="pre">MPILD</span></span><a class="headerlink" href="#envvar-MPILD" title="Link to this definition">¶</a></dt>
<dd><p>Convenience alias for <span class="target" id="index-10"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_MPILD"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_MPILD</span></code></a>.</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-MPICFG">
<span class="sig-name descname"><span class="pre">MPICFG</span></span><a class="headerlink" href="#envvar-MPICFG" title="Link to this definition">¶</a></dt>
<dd><p>Convenience alias for <span class="target" id="index-11"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_MPICFG"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_MPICFG</span></code></a>.</p>
</dd></dl>

</section>
<section id="using-scikit-build-core">
<h3>Using <strong>scikit-build-core</strong><a class="headerlink" href="#using-scikit-build-core" title="Link to this heading">¶</a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Set the <span class="target" id="index-12"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_BACKEND"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_BACKEND</span></code></a> environment variable to
<code class="docutils literal notranslate"><span class="pre">&quot;scikit-build-core&quot;</span></code> to use the <a class="reference external" href="https://scikit-build-core.readthedocs.io/">scikit-build-core</a> build backend.</p>
</div>
<p>When using the <a class="reference external" href="https://scikit-build-core.readthedocs.io/">scikit-build-core</a> build backend, mpi4py delegates all
of MPI build configuration to <a class="reference external" href="https://cmake.org/">CMake</a>’s <a class="reference external" href="https://cmake.org/cmake/help/latest/module/FindMPI.html">FindMPI</a> module. Besides the
obvious advantage of cross-platform support, this delegation to CMake
may be convenient in build environments exposing vendor software
stacks via intricate module systems. Note however that mpi4py will not
be able to look for MPI routines available beyond the MPI standard
version the MPI implementation advertises to support (via the
<code class="xref c c-macro docutils literal notranslate"><span class="pre">MPI_VERSION</span></code> and <code class="xref c c-macro docutils literal notranslate"><span class="pre">MPI_SUBVERSION</span></code> macro constants
in the <code class="file docutils literal notranslate"><span class="pre">mpi.h</span></code> header file), any missing MPI constant or symbol
will prevent a successful build.</p>
</section>
<section id="using-meson-python">
<h3>Using <strong>meson-python</strong><a class="headerlink" href="#using-meson-python" title="Link to this heading">¶</a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Set the <span class="target" id="index-13"></span><a class="reference internal" href="#envvar-MPI4PY_BUILD_BACKEND"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">MPI4PY_BUILD_BACKEND</span></code></a> environment variable to
<code class="docutils literal notranslate"><span class="pre">&quot;meson-python&quot;</span></code> to use the <a class="reference external" href="https://meson-python.readthedocs.io/">meson-python</a> build backend.</p>
</div>
<p>When using the <a class="reference external" href="https://meson-python.readthedocs.io/">meson-python</a> build backend, mpi4py delegates build
tasks to the <a class="reference external" href="https://mesonbuild.com/">Meson</a> build system.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>mpi4py support for the <a class="reference external" href="https://meson-python.readthedocs.io/">meson-python</a> build backend is
experimental. For the time being, users must set the <span class="target" id="index-14"></span><a class="reference external" href="https://docs.python.org/3/using/configure.html#envvar-CC" title="(in Python v3.14)"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CC</span></code></a>
environment variable to the command or path corresponding to the
<strong class="program">mpicc</strong> C compiler wrapper.</p>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/mpi4py.svg" alt="Logo of MPI for Python"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#wheel-packages"><strong>Wheel</strong> packages</a><ul>
<li><a class="reference internal" href="#linux">Linux</a><ul>
<li><a class="reference internal" href="#fedora-rhel">Fedora/RHEL</a></li>
<li><a class="reference internal" href="#debian-ubuntu">Debian/Ubuntu</a></li>
<li><a class="reference internal" href="#hpe-cray-os">HPE Cray OS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#macos">macOS</a></li>
<li><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conda-packages"><strong>Conda</strong> packages</a></li>
<li><a class="reference internal" href="#system-packages">System packages</a><ul>
<li><a class="reference internal" href="#sys-pkg-linux">Linux</a></li>
<li><a class="reference internal" href="#sys-pkg-macos">macOS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-from-sources">Building from sources</a></li>
<li><a class="reference internal" href="#build-backends">Build backends</a><ul>
<li><a class="reference internal" href="#using-setuptools">Using <strong>setuptools</strong></a></li>
<li><a class="reference internal" href="#using-scikit-build-core">Using <strong>scikit-build-core</strong></a></li>
<li><a class="reference internal" href="#using-meson-python">Using <strong>meson-python</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="citation.html"
                          title="previous chapter">Citation</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="develop.html"
                          title="next chapter">Development</a></p>
  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="develop.html" title="Development"
             >next</a> |</li>
        <li class="right" >
          <a href="citation.html" title="Citation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MPI for Python 4.1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Lisandro Dalcin.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>